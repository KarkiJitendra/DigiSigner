{% extends "base.html" %}

{% block title %}Dashboard - Digital Signature Management{% endblock %}

{% block meta_description %}
    Manage your digital signatures, sign documents online, and track your signing workflow.
{% endblock %}

{% block meta_keywords %}
    dashboard, digital signature, document management, sign documents, track signatures
{% endblock %}
{%load static%}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Dashboard Header -->
    <div class="dashboard-header">
        <h1>Digital Signature Online Service</h1>
        <p>Sign Documents Online Securely and Efficiently</p>
    </div>

    <!-- Welcome Card -->
    <div class="welcome-card">
        <div class="welcome-content">
            <h2>Welcome back, {% if user.get_full_name %}{{ user.get_full_name }}{% else %}{{ user.username }}{% endif %}! ðŸ‘‹</h2>
            <p>You have <strong>3 free documents</strong> remaining this month. <span class="current-date"></span></p>
        </div>
        <div class="usage-stats">
            <div class="stat-item">
                <span class="stat-number">{{ user_stats.documents|default:"1,247" }}</span>
                <span class="stat-label">Total Documents</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ user_stats.signed|default:"892" }}</span>
                <span class="stat-label">Signed</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ user_stats.pending|default:"128" }}</span>
                <span class="stat-label">Pending</span>
            </div>
        </div>
    </div>

    <!-- Quick Stats -->
    <div class="quick-stats">
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-file-contract"></i>
            </div>
            <div class="stat-content">
                <h3 class="stat-documents">1,247</h3>
                <p>Total Documents</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-content">
                <h3 class="stat-signed">892</h3>
                <p>Signed Documents</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-clock"></i>
            </div>
            <div class="stat-content">
                <h3 class="stat-pending">128</h3>
                <p>Pending Signatures</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-layer-group"></i>
            </div>
            <div class="stat-content">
                <h3 class="stat-templates">45</h3>
                <p>Saved Templates</p>
            </div>
        </div>
    </div>

    <!-- Signing Cards Grid -->
    <div class="signing-cards">
        <!-- Sign Document Now Card -->
        <div class="signing-card">
            <div class="signing-card-header">
                <h3>SIGN DOCUMENT NOW</h3>
                <p>100% free & secure unlimited documents</p>
            </div>
            
            <div class="file-formats">
                <span class="format-badge">PDF</span>
                <span class="format-badge">DOC</span>
                <span class="format-badge">XLS</span>
                <span class="format-badge">JPG</span>
            </div>
            
            <div class="upload-area" id="sign-now-upload">
                <div class="upload-icon">
                    <i class="fas fa-cloud-upload-alt"></i>
                </div>
                <div class="upload-text">Drop your file or choose file</div>
                <div class="upload-subtext">PDF | DOC | XLS | JPG</div>
                <input type="file" class="file-input" multiple accept=".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png">
            </div>
            
            <div class="uploaded-files">
                <!-- Files will appear here -->
            </div>
            
            <div class="action-buttons">
                <button class="btn-sign" onclick="handleSignNow()">
                    <i class="fas fa-signature"></i> SIGN DOCUMENT NOW
                </button>
            </div>
        </div>

        <!-- Send for Signing Card -->
        <div class="signing-card">
            <div class="signing-card-header">
                <h3>SEND FOR SIGNING</h3>
                <p>Full 14-day trial then 3 free docs per month</p>
            </div>
            
            <div class="file-formats">
                <span class="format-badge">PDF</span>
                <span class="format-badge">DOC</span>
                <span class="format-badge">XLS</span>
                <span class="format-badge">JPG</span>
            </div>
            
            <div class="upload-area" id="send-signing-upload">
                <div class="upload-icon">
                    <i class="fas fa-paper-plane"></i>
                </div>
                <div class="upload-text">Drop your file or choose file</div>
                <div class="upload-subtext">PDF | DOC | XLS | JPG</div>
                <input type="file" class="file-input" multiple accept=".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png">
            </div>
            
            <div class="uploaded-files">
                <!-- Files will appear here -->
            </div>
            
            <div class="action-buttons">
                <button class="btn-sign-outline" onclick="handleSendForSigning()">
                    <i class="fas fa-share-square"></i> SEND FOR SIGNING
                </button>
            </div>
        </div>
    </div>

    <!-- Recent Documents -->
    <div class="recent-documents">
        <div class="section-header">
            <h2>Recent Documents</h2>
            <a href="#" class="view-all">View All â†’</a>
        </div>
        
        <div class="table-responsive">
            <table class="documents-table">
                <thead>
                    <tr>
                        <th>Document Name</th>
                        <th>Type</th>
                        <th>Created</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="document-name">
                                <i class="fas fa-file-pdf document-icon"></i>
                                <span>Non-Disclosure Agreement.pdf</span>
                            </div>
                        </td>
                        <td>PDF</td>
                        <td>2 hours ago</td>
                        <td><span class="status-badge" data-status="signed">Signed</span></td>
                        <td>
                            <div class="action-dropdown">
                                <button class="dropdown-btn"><i class="fas fa-ellipsis-v"></i></button>
                                <div class="dropdown-content">
                                    <a href="#" class="dropdown-item"><i class="fas fa-eye"></i> View</a>
                                    <a href="#" class="dropdown-item"><i class="fas fa-download"></i> Download</a>
                                    <a href="#" class="dropdown-item"><i class="fas fa-share"></i> Share</a>
                                    <a href="#" class="dropdown-item"><i class="fas fa-trash"></i> Delete</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="document-name">
                                <i class="fas fa-file-word document-icon"></i>
                                <span>Employment Contract.docx</span>
                            </div>
                        </td>
                        <td>DOCX</td>
                        <td>Yesterday</td>
                        <td><span class="status-badge" data-status="pending">Pending</span></td>
                        <td>
                            <div class="action-dropdown">
                                <button class="dropdown-btn"><i class="fas fa-ellipsis-v"></i></button>
                                <div class="dropdown-content">
                                    <a href="#" class="dropdown-item"><i class="fas fa-pen"></i> Sign Now</a>
                                    <a href="#" class="dropdown-item"><i class="fas fa-eye"></i> View</a>
                                    <a href="#" class="dropdown-item"><i class="fas fa-share"></i> Resend</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="document-name">
                                <i class="fas fa-file-excel document-icon"></i>
                                <span>Financial Report.xlsx</span>
                            </div>
                        </td>
                        <td>XLSX</td>
                        <td>3 days ago</td>
                        <td><span class="status-badge" data-status="signed">Signed</span></td>
                        <td>
                            <div class="action-dropdown">
                                <button class="dropdown-btn"><i class="fas fa-ellipsis-v"></i></button>
                                <div class="dropdown-content">
                                    <a href="#" class="dropdown-item"><i class="fas fa-eye"></i> View</a>
                                    <a href="#" class="dropdown-item"><i class="fas fa-download"></i> Download</a>
                                    <a href="#" class="dropdown-item"><i class="fas fa-chart-bar"></i> Analytics</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="document-name">
                                <i class="fas fa-file-pdf document-icon"></i>
                                <span>Service Agreement.pdf</span>
                            </div>
                        </td>
                        <td>PDF</td>
                        <td>1 week ago</td>
                        <td><span class="status-badge" data-status="expired">Expired</span></td>
                        <td>
                            <div class="action-dropdown">
                                <button class="dropdown-btn"><i class="fas fa-ellipsis-v"></i></button>
                                <div class="dropdown-content">
                                    <a href="#" class="dropdown-item"><i class="fas fa-redo"></i> Renew</a>
                                    <a href="#" class="dropdown-item"><i class="fas fa-eye"></i> View</a>
                                    <a href="#" class="dropdown-item"><i class="fas fa-trash"></i> Delete</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Quick Links -->
    <div class="recent-documents">
        <div class="section-header">
            <h2>Quick Links</h2>
        </div>
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
            <a href="#" class="btn-sign-outline" style="flex-direction: column; padding: 20px; text-align: center;">
                <i class="fas fa-layer-group" style="font-size: 24px; margin-bottom: 10px;"></i>
                <span>Templates</span>
            </a>
            <a href="#" class="btn-sign-outline" style="flex-direction: column; padding: 20px; text-align: center;">
                <i class="fas fa-address-book" style="font-size: 24px; margin-bottom: 10px;"></i>
                <span>Contacts</span>
            </a>
            <a href="#" class="btn-sign-outline" style="flex-direction: column; padding: 20px; text-align: center;">
                <i class="fas fa-chart-line" style="font-size: 24px; margin-bottom: 10px;"></i>
                <span>Reports</span>
            </a>
            <a href="#" class="btn-sign-outline" style="flex-direction: column; padding: 20px; text-align: center;">
                <i class="fas fa-cog" style="font-size: 24px; margin-bottom: 10px;"></i>
                <span>Settings</span>
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/dashboard.js' %}"></script>
{% endblock %}